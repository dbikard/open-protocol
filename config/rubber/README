## How-to deploy a staging environment:

1. Sign up for AWS services: EC2, RDS, S3
2. Go to the management console, select EC2.
3. Click on Keypairs.
4. Generate a keypaid called gsg-keypair. It will download as gsg-keypair.pem.
5. mkdir ~/.ec2
6. mv gsg-keypair.pem ~/.ec2/gsg-keypair (no extension!)
7. chmod 600 ~/.ec2/gsg-keypair
8. ssh-keygen -y -f ~/.ec2/gsg-keypair > ~/.ec2/gsg-keypair.pub
9. In the AWS management console, go to RDS, and Launch Instance.
10. DB instance class: db.m1.small
    DB engine version: default
    no/no for the upgrade and multi-zone deployment
    storage: 5gb
    instance identifier: staging_master
    master username: deploy
    password: whatever you choose
    database name: open_protocol
    default for the rest
11. 3-day backup retention, maintenance window can be set if you're interested.
13. While you wait for the DB machine to finish creating, go back to EC2, select Security Groups.
14. Create a new security group. Call it "open_protocol_staging_app", give it the description "Rubber automatic security group for role: app".
    (You won't have to do this in subsequent staging deploys/provisionings.)
15. Go back to RDS. Go to DB Security groups, select default.
16. At the bottom, select "EC2 security group", enter "open_protocol_staging_app" for the name, and paste your AWS account number (which you can find under Account => Security Credentials, at the top of the page)  then click "Add" to add an authorization.
    (You won't have to do this again either after the first time.)
17. Go back to the instance and copy the Endpoint field. Open config/database.yml.
18. Under "staging:", paste the Endpoint after the "host:" declaration, and fill out the password you chose.
19. Then:
        RUBBER_ENV=staging cap rubber:create_staging
            hostname to use: just hit enter
            roles: just hit enter
            you'll also be prompted for your local sudo password to edit /etc/hosts